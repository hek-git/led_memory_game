# 🎮 LED Memory

**LED Memory**는 레트로 감성의 2D 픽셀 아트 스타일로 제작된 LED 시퀀스
기억 게임입니다.

플레이어는 무작위로 점등되는 LED 버튼의 순서를 기억한 뒤, 같은 순서로
입력하여 맞추는 게임입니다.  
전체 UI는 4:3 화면 비율 기반으로
설계되었습니다.


------------------------------------------------------------------------  

## 🕹️ 게임 방법

1.  Play 버튼을 누르면 세 개의 LED 버튼(🟡 노랑, 🔴 빨강, 🟢 초록)이 랜덤
    순서로 점등됩니다.
2.  점등되는 순서를 주의 깊게 확인합니다.
3.  동일한 순서로 버튼을 입력합니다.
4.  정해진 횟수의 버튼을 눌렀다면 결과에 따라 다음 이미지가 나타납니다.
    -   ✅ **Correct!** --- 순서를 정확히 입력한 경우
    -   ❌ **Wrong!** --- 순서를 틀린 경우
5. 로고를 눌러 메인 화면으로 돌아갑니다.

------------------------------------------------------------------------  

## 🎨 UI 및 디자인 특징

-   🖥️ 4:3 화면 비율 기반 레트로 프레임
-   🕹️ 픽셀 아트 스타일 UI
-   💡 형광 느낌의 LED 버튼 디자인
-   🧱 로고 및 버튼 컴포넌트 분리 설계

------------------------------------------------------------------------  

## ⚙️ 기술적 특징

-   2.4인치 디스플레이 환경 고려 설계
-   저용량 최적화를 위한 픽셀 아트 기반 리소스
-   모듈화된 UI 컴포넌트 구조
-   MVP 패턴으로 화면, 비즈니스 로직 계층 분리
-   GPIO를 이용한 LED 제어

------------------------------------------------------------------------  
## 📺 게임 화면
### 메인 화면    
<img width="396" height="296" alt="background" src="https://github.com/user-attachments/assets/4cc975eb-b07b-478b-baa5-f427b6105989" /><br>
  
### 게임 플레이 화면  
<img width="398" height="294" alt="2" src="https://github.com/user-attachments/assets/342f75fa-9dad-4b8f-ae5b-ae541470eb22" /><br>
  

### 결과 화면  
<img width="396" height="296" alt="제목 없음" src="https://github.com/user-attachments/assets/e9800cbb-ca9a-476d-97cf-b5945bf1024d" />
<br>
<img width="396" height="293" alt="3" src="https://github.com/user-attachments/assets/7ba65d3e-72e2-4188-bd99-a185ed79b170" />


------------------------------------------------------------------------  
## ⚠️ 주의 사항
-  본 소프트웨어는 STM32F429I-DISC1 mcu를 기준으로 개발되었습니다.
-  해당 디렉토리를 `C:\TouchGFXProjects` 하단에 위치 시키고 빌드를 진행해야 정상 동작합니다.
-  소스파일을 ide에서 편집하기 위해서는 STM32CubeIDE -> `C:\TouchGFXProjects\led_memory_game\STM32CubeIDE`  
디렉토리를 기준으로 Open해야 합니다.
-  Pin Map 변경에 주의합니다.
    - Reserve된 핀 변경하지 않기
    - 비어있는 핀 설정 이전에 Stable 버전 저장하기
-   기타 오류 발생 시 MCU 재부팅, 클린 빌드, 전원 재공급, 터미널 출력 확인을 진행하면 대부분의 문제가 해결됩니다.

------------------------------------------------------------------------
## 🛠 Troubleshooting
### 1. 문제: 초기 프로젝트 생성 및 핀맵 변경 시 오류
제공된 예제에서 핀맵을 변경한 이후 Generate Code를 눌러 IDE에 반영이 된 이후  
핵심 라이브러리(`TouchGFX`)를 찾지 못하는 오류가 발생했습니다.
  
<img width="788" height="130" alt="123" src="https://github.com/user-attachments/assets/0b13f59f-dad5-4a08-b8cb-e13811a0a8e3" /><br><br>
IDE의 `Project -> Properties`에서 포함된 라이브러리 경로를 찾아보았으나 Code Generate 이전과 이후의 차이가 없어 원인을 찾지 못했습니다.  
- **원인**: 불명(Code Generate 이후 Path가 꼬이거나 Config 등의 파일이 삭제 되는 것으로 추측됩니다.)
- **해결**: `TouchGFX에서 초기 프로젝트를 생성`
<br>

### 2. 문제: 터치 위치와 화면상 인식이 반대로 되는 문제
LCD에 터치를 진행했을 때, Y축에 대해 실제 터치 위치와 화면에서의 인식이 반대로 되는 문제가 발생했습니다.
기본으로 작성된 코드에서는 화면 터치시 이를 인식하는 좌표를 계산하는 로직에 오류가 있었습니다.  
  
![error1](https://github.com/user-attachments/assets/a1e634cf-0482-4993-a758-6b3687b5f2ae)  
- **원인**: 기본 제공 코드의 터치시 Y좌표 계산 로직 오류
- **해결**: Y좌표 계산 로직 코드 수정
``` C++
bool STM32TouchController::sampleTouch(int32_t& x, int32_t& y)
{
    TS_StateTypeDef state;
    BSP_TS_GetState(&state);
    if (state.TouchDetected)
    {
        x = state.X;
        y = state.Y;

        y = 300 - y;
        return true;
    }
    return false;
}
```
<br>

### 3. 문제: `printf()` 출력시 불규칙한 `Hard Fault Error` 발생  
구현 중 편한 디버깅을 위해 `printf()`문을 사용했음에도 터미널에 제대로 출력이 되지 않는 문제가 발생했습니다.  
로직 자체는 정상적으로 수행되었음에도 `printf()`문에서 제대로 출력이 되지 않아 디버깅을 수행해본 결과,  
로직은 정상 수행되지만 `printf()` 과정에서 불규칙적인 `Hard Fault`가 발생함을 확인하였고 디버깅에 혼선이 발생하였습니다.
- **원인**: 불필요 `printf()`문 남발
- **해결**: 중요한 로직 확인에 필요한 `printf()` 이외에 불필요 `printf()` 삭제  

------------------------------------------------------------------------

# 📺 DEMO
https://github.com/user-attachments/assets/3c692916-e7b5-409c-a7cc-3db264e266e8

------------------------------------------------------------------------  

## 🚀 향후 개선 방향(하지 못해 아쉬운 것)
-   LED 버튼 사운드 효과 추가
-   LED 개수 추가
-   타이머 인터럽트를 사용한 시간 제한 설정
-   추가 하드웨어 모듈 사용(부저, 모터 등)
-   RTOS의 기능(멀티태스킹, 이벤트, 인터럽트 처리) 추가 사용
-   단계별 난이도 증가 시스템 구현
-   최고 점수(High Score) 저장 기능
-   애니메이션 전환 효과 추가
------------------------------------------------------------------------

레트로 감성의 LED 기억 게임을 즐겨보세요! 🎯
